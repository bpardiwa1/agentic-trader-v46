# =============================================================
# Agentic Trader — Indices v4.6 (idx_v46) Environment
# KL timezone (UTC+8). Times below are interpreted as local server time.
# This file provides global defaults plus per-symbol overrides.
# Symbols: NAS100.s, HK50.s, UK100.s   (add others as needed)
# =============================================================

ASSET=INDEX
ASSET_CLASS=INDEX
EXECUTION_MODE=live
BROKER_BACKEND=mt5
MT5_PATH=C:\Program Files\MetaTrader 5\terminal64.exe
MT5_LOGIN=18023893
MT5_PASSWORD=VishyVahis786!
MT5_SERVER=VTMarkets-Live 3
# -------------------------------------------------------------
# AGENT SYMBOLS (comma-separated)
# -------------------------------------------------------------


AGENT_SYMBOLS=NAS100.s,HK50.s,UK100.s

# -------------------------------------------------------------
# STRATEGY ROUTING (kept for forward compatibility)
# -------------------------------------------------------------
STRATEGY_DEFAULT=INDICES_MOMENTUM
STRATEGY_NAS100_S=INDICES_MOMENTUM
STRATEGY_HK50_S=INDICES_MOMENTUM
STRATEGY_UK100_S=INDICES_MOMENTUM

# -------------------------------------------------------------
# SYMBOL ALIASES (optional: map UI names to broker symbols)
# -------------------------------------------------------------
SYMBOL_ALIAS_NAS100_S=NAS100.s
SYMBOL_ALIAS_HK50_S=HK50.s
SYMBOL_ALIAS_UK100_S=UK100.s

# -------------------------------------------------------------
# BASE LOTS (each is still scaled dynamically by confidence/vol)
# -------------------------------------------------------------
LOTS_NAS100_S=0.30
LOTS_HK50_S=0.30
LOTS_UK100_S=0.30

# =============================================================
# CORE STRATEGY PARAMS (global defaults)
# =============================================================
INDICES_EMA_FAST=20
INDICES_EMA_SLOW=50
INDICES_RSI_PERIOD=14
INDICES_RSI_LONG_TH=60
INDICES_RSI_SHORT_TH=40

# Per-symbol thresholds (optional; otherwise global defaults apply)
RSI_LONG_TH_NAS100=60
RSI_SHORT_TH_NAS100=40
RSI_LONG_TH_HK50=58
RSI_SHORT_TH_HK50=42
RSI_LONG_TH_UK100=58
RSI_SHORT_TH_UK100=42

# -------------------------------------------------------------
# Price step (EPS) and SL/TP in *index points*
# -------------------------------------------------------------
INDICES_EPS=10
INDICES_SL=100
INDICES_TP=200

# Per-symbol overrides
INDICES_EPS_NAS100=15
INDICES_SL_NAS100=100
INDICES_TP_NAS100=200

INDICES_EPS_HK50=12
INDICES_SL_HK50=120
INDICES_TP_HK50=240

INDICES_EPS_UK100=8
INDICES_SL_UK100=80
INDICES_TP_UK100=160

# Global defaults
MT5_MIN_STOP_POINTS=100
MT5_STOP_WIDEN_MULT=2.0

# Per-symbol overrides
MT5_MIN_STOP_POINTS_NAS100=80
MT5_MIN_STOP_POINTS_HK50=60
MT5_MIN_STOP_POINTS_UK100=120

MT5_STOP_WIDEN_MULT_NAS100=1.8
MT5_STOP_WIDEN_MULT_HK50=2.2
MT5_STOP_WIDEN_MULT_UK100=2.0


# =============================================================
# ATR-BASED DYNAMIC SL/TP
# =============================================================
INDICES_ATR_ENABLED=true
INDICES_ATR_PERIOD=14
INDICES_ATR_SL_MULT=2.0
INDICES_ATR_TP_MULT=3.0
IDX_SESSION_ENFORCE=true

# =============================================================
# CONFIDENCE / RISK / GUARDRAILS / TRUST
# =============================================================
AGENT_MIN_CONFIDENCE=0.55
ENABLE_DYNAMIC_RISK=true
ENABLE_GUARDRAILS=true

IDX_SESSION_ENFORCE=true
IDX_AGENT_MAX_OPEN=12
IDX_AGENT_MAX_PER_SYMBOL=1
MAX_TOTAL_TRADES=12
MAX_SYMBOL_TRADES=1
AGENT_MAX_OPEN=15             
AGENT_MAX_PER_SYMBOL=1 
IDX_COOLDOWN_SEC=300
IDX_BLOCK_SAME_DIRECTION=false
IDX_STOP_WIDEN_MULT=1.5
IDX_MIN_LOTS=0.10
IDX_MAX_LOTS=0.30


# Mixed regime fallback — allows near-threshold trades when EMA gap is strong
MIXED_FALLBACK=true
MIXED_FALLBACK_RSI_PAD=1.0
MIXED_FALLBACK_EMA_GAP_OK=40

IDX_TRUST_DECAY_SEC=14400
IDX_TRUST_DECAY_STEP=0.05
IDX_TRUST_INCREMENT=0.10
IDX_TRUST_DECREMENT=0.10
IDX_TRUST_WEIGHT=0.4
IDX_ATR_TARGET_MIN=0.001
IDX_ATR_TARGET_MAX=0.002



# =============================================================
# TRADING WINDOW (GLOBAL DEFAULTS)
# =============================================================
# Global time window (HH:MM). Applies if symbol-specific window not set.
INDICES_TRADING_WINDOW_START=21:30
INDICES_TRADING_WINDOW_END=23:30
INDICES_TRADING_DAYS=1,2,3,4,5

# Symbol-specific *overrides* (KL time). If set, overrides global window:
# NAS100.s (US session preview; confirmed)
INDICES_TRADING_WINDOW_START_NAS100=21:30
INDICES_TRADING_WINDOW_END_NAS100=23:30
INDICES_TRADING_DAYS_NAS100=1,2,3,4,5

# HK50.s (HK session morning focus)
INDICES_TRADING_WINDOW_START_HK50=09:30
INDICES_TRADING_WINDOW_END_HK50=11:30
INDICES_TRADING_DAYS_HK50=1,2,3,4,5

# UK100.s (UK session early hours)
INDICES_TRADING_WINDOW_START_UK100=15:00
INDICES_TRADING_WINDOW_END_UK100=22:00
INDICES_TRADING_DAYS_UK100=1,2,3,4,5

# =============================================================
# MT5 ORDER SAFEGUARDS
# =============================================================
INDICES_PIP_MODE=index_point
MT5_MIN_STOP_POINTS=100
MT5_STOP_WIDEN_MULT=2.0
MT5_ATTACH_RETRIES=5
MT5_ATTACH_DELAY_SEC=0.8
MT5_DEVIATION=80
MT5_ALLOW_MARKET_EXEC=true
MT5_ORDER_FILL_MODE=IOC
# CM07a — Enhanced Stop Logic Parameters
MT5_PRICE_STOP_MULT=1.0         # fallback for price-based stops
MT5_PRICE_STOP_MULT_UK100=1.5   # UK100.s extra buffer in price units
MT5_PRICE_POINT_SCALE=0.0001    # tick-size multiplier (for MT5 price conversion)




# =============================================================
# LOGGING
# =============================================================
LOG_FILE_NAME=indices.trades.log
LOG_DIR=logs/indices
LOG_LEVEL=DEBUG